########################################
#
# ████████╗███╗   ███╗██╗   ██╗██╗  ██╗
# ╚══██╔══╝████╗ ████║██║   ██║╚██╗██╔╝
#    ██║   ██╔████╔██║██║   ██║ ╚███╔╝ 
#    ██║   ██║╚██╔╝██║██║   ██║ ██╔██╗ 
#    ██║   ██║ ╚═╝ ██║╚██████╔╝██╔╝ ██╗
#    ╚═╝   ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝
#
########################################                                     

##########
# General
##########

set -g escape-time 0
set -g repeat-time 1000
set -g history-limit 10000

%if #{m:/dev/pts/*,#{client_tty}}
  set -g default-terminal "tmux-256color"
  set -ag terminal-overrides ",xterm-256color:Tc"
%endif

set -g mouse on # Enable Mouse Support
setw -g mode-keys vi # Use Vim Keybinds in Copy Mode
set -g monitor-activity on
set -g monitor-bell on
set -g focus-events on

set -g base-index 1 # Start Window Numbering at 1
set -g pane-base-index 1 # Start Pane Numbering at 1
set -g renumber-windows on # Keep Window Numbering Sequential
set -g automatic-rename on # Auto-Rename Windows

set -g status-interval 1 # Refresh status bar every second

##########
# Styling
##########

#########
# Colors

%if #{m:/dev/pts/*,#{client_tty}}
  blue=#89b4fa
  green=#a6e3a1
  magenta=#cba6f7
  red=#f38ba8
  yellow=#f9e2af
  black=#000000
  white=#ffffff
%else
  blue=blue
  green=green
  magenta=magenta
  red=red
  yellow=yellow
  black=black
  white=white
%endif

###############
# Pane Styling

# Inactive Pane
set -g pane-border-style fg=${black},bright

# Active Pane
set -g pane-active-border-style fg=${magenta}

######################
# Status Line Styling

# Overall
set -g status-style bg=default,fg=${white}

# Left Status
set -g status-left ""

# Right Status
set -g status-right "\
#{?pane_in_mode,#[bg=${magenta}#,fg=${black}],#[bg=${blue}#,fg=${black}]}\
 %H:%M "

# Inactive Window
set -g window-status-format "\
#{?window_activity_flag,#[fg=${black}#,bg=${red}],\
#{?window_last_flag,#[fg=${black}#,bg=${yellow}],\
#[fg=${black}#,bg=${white}]}}\
 #I \
#{?window_activity_flag,#[fg=${red}#,bg=default],\
#{?window_last_flag,#[fg=${yellow}#,bg=default],\
#[fg=${white}#,bg=default]}}\
 #W"

# Active Window
set -g window-status-current-format "\
#[bg=${green},fg=${black}]\
 #I \
#[bg=default,fg=${green}]\
 #W"

set -g window-status-last-style fg=${yellow} # Last active window
set -g window-status-activity-style fg=${red} # Window w/ activity
set -g window-status-bell-style fg=${red} # Window w/ alert
set -g mode-style fg=${magenta} # Mode display

# Command Prompt
set -g message-style fg=${yellow},bg=default # Command prompt
set -g message-command-style fg=${white},bg=default,bold # Command prompt 

###########
# Keybinds
###########

unbind -a # Unbind all keybinds
set -g prefix C-Space # Rebind Prefix
bind C-Space send-prefix # Send Commands to Nested Sessions

bind ? list-keys # Show keybinds
bind : command-prompt # Open command prompt

# Easy Config Reload
bind r source-file ~/.config/tmux/tmux.conf \; display "Config Reloaded!"

bind q detach-client # Detach from Session

bind v copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi S-y send -X copy-line-and-cancel
bind -T copy-mode-vi Escape send -X clear-selection
bind -T copy-mode-vi q send -X cancel

########
# Panes

bind -T prefix w switch-client -T paneBinds # Switch to pane bindings

bind -T paneBinds d kill-pane # Kill current pane

# Split Windows to Panes
bind -T paneBinds \\ split-window -h -c "#{pane-current-path}" # split Window Horizontally
bind -T paneBinds - split-window -v -c "#{pane-current-path}" # Split Window Vertically

# Select panes
bind -T paneBinds h select-pane -L # Select Left Pane
bind -T paneBinds j select-pane -D # Select Bottom Pane
bind -T paneBinds k select-pane -U # Select Top Pane
bind -T paneBinds l select-pane -R # Select Right Pane

# Swap Panes
bind -T paneBinds > swap-pane -D # swap with next pane
bind -T paneBinds < swap-pane -U # swap with prev pane

# Resize Panes
bind -T paneBinds -r C-h resize-pane -L 5 # Increase pane left
bind -T paneBinds -r C-j resize-pane -D 5 # Increase pane down
bind -T paneBinds -r C-k resize-pane -U 5 # Increase pane up
bind -T paneBinds -r C-l resize-pane -R 5 # Increase pane down
bind -T paneBinds -r m resize-pane -Z # Maximize Pane

##########
# Windows

bind -T prefix Tab switch-client -T windowBinds # Switch to window bindings

bind -T windowBinds Tab new-window # Open new window
bind -T windowBinds d kill-window # Kill current window

# Select Window
bind -T windowBinds n next-window
bind -T windowBinds p previous-window
bind -T windowBinds 1 select-window -t :1
bind -T windowBinds 2 select-window -t :2
bind -T windowBinds 3 select-window -t :3
bind -T windowBinds 4 select-window -t :4
bind -T windowBinds 5 select-window -t :5
bind -T windowBinds 6 select-window -t :6
bind -T windowBinds 7 select-window -t :7
bind -T windowBinds 8 select-window -t :8
bind -T windowBinds 9 select-window -t :9
bind -T windowBinds 0 choose-tree -Z
