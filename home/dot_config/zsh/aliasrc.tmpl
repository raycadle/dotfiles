#########################################################
#
#     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
#    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
#    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     
#    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     
# â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
# â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•
#
#########################################################
#
# General
alias q="exit"
alias c="clear"

# Admin Commands
alias _="sudo"

# Text Editor
alias e="${EDITOR}"

# Changing Directories
alias g="cd"
alias r="cd -"
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ......="cd ../../../../.."

# Search Command History
alias h="history | less"
alias hs="history | grep"
alias hsi="history | grep -i"

# Modify Existing Commands
alias mkdir="mkdir -p" # Create parent directories if non-existing
alias rm="rm -I" # Prompt for confirmation before deleting files
alias rmr="rm -Ir" # Prompt for confirmation before deleting files recursively
alias cp="cp -r" # Copy files recursively

# Shorten Long Commands
alias mkexe="chmod +x" # Makes a file executable

# Listing Directory Contents
{{ if or (eq .osid "linux-arch") (eq .osid "linux-fedora") -}}

alias l="eza -1 --icons=auto --group-directories-first" # list
alias la="eza -1a --icons=auto --group-directories-first" # list all
alias ld="eza -1D --icons=auto" # list dirs
alias lad="eza -1aD --icons=auto" # list dirs
alias lf="eza -1f --icons=auto" # list files
alias laf="eza -1af --icons=auto" # list files
alias ll="eza -lh --icons=auto --group-directories-first" # long list info
alias lla="eza -lha --icons=auto --group-directories-first" # list info all
alias lld="eza -lhD --icons=auto" # list info dirs
alias llad="eza -lhaD --icons=auto" # list info dirs
alias llf="eza -lhf --icons=auto" # list info file
alias llaf="eza -lhaf --icons=auto" # list info file

{{ else if eq .osid "linux-rocky" -}}

alias l="ls -1 --group-directories-first" # list
alias la="ls -1a --group-directories-first" # list all
alias ll="ls -lh --group-directories-first" # long list info
alias lla="ls -lha --group-directories-first" # list info all

{{- end }}

# Package Manager Commands
{{ if or (eq .osid "linux-fedora") (eq .osid "linux-rocky") -}}

alias dnfl="sudo dnf list" # List packages
alias dnfli="sudo dnf list installed" # List installed packages
alias dnfgl="sudo dnf grouplist" # List package groups
alias dnfmc="sudo dnf makecache" # Generate metadata cache
alias dnfp="sudo dnf info" # Show package information
alias dnfs="sudo dnf search" # Search package
alias dnfu="sudo dnf upgrade" # Upgrade package
alias dnfi="sudo dnf install" # Install package
alias dnfgi="sudo dnf groupinstall" # Install package group
alias dnfr="sudo dnf remove" # Remove package
alias dnfgr="sudo dnf groupremove" # Remove package group
alias dnfc="sudo dnf clean all" # Clean cache

{{ else if eq .osid "linux-arch" -}}

alias pkg="sudo pacman" # package manager
alias pkgi="sudo pacman -S" # install packages

{{- end }}

{{ if eq .osid "linux-fedora" -}}

# Git Commands
alias gi="git init"
alias gcl="git clone"
alias gs="git status"
alias gd="git diff"
alias ga="git add"
alias ga.="git add ."
alias gr="git restore"
alias grs="git restore --staged"
alias gc="git commit"
alias gcm="git commit -m"
alias gcp="git cherry-pick"
alias gpl="git pull"
alias gps="git push"
alias gpso="git push origin"
alias gf="git fetch"
alias gb="git branch"
alias gbd="git branch -d"
alias gbv="git branch -v"
alias gbvv="git branch -vv"
alias gco="git checkout"
alias gl="git log"
alias glo="git log --oneline"

############
# Functions
############
#
new_script() {
  local file
  if [[ -n "${1}" ]]; then
    file="${HOME}/.local/bin/${1}"
  else
    read -rp "Enter the name of your new script: " file
  fi
  
  if [[ -e "$file" ]]; then
    echo "Error: '$file' already exists."
    return 1
  fi

  ext="${file##*.}"
  case "${ext}" in
    sh)
      cat << 'EOF' > "${file}"
#!/bin/bash
      
set -eu
      
main() {
    # Logic goes here
}
      
main "$@"

EOF
      ;;
    py)
      cat << EOF > "${file}"
#!/usr/bin/env python3

def main():
    # Logic goes here

if __name__ == "__main__":
    main()

EOF
      ;;
    *)
      echo "Error: Unsupported extension '${ext}'. Only .sh and .py are currently supported."
      return 1
      ;;
  esac
  
  chmod +x "${file}"
  echo "Created '${file}' with executable permissions."
}

sync_repos() {
  local REPOS=(
    "git@github.com:raycadle/dotfiles.git"
    "git@github.com:raycadle/media-manager.git"
    "git@github.com:raycadle/walthemer.git"
  )

  local TARGET_DIR="${1:-${HOME}/projects}"

  local CLONE="â¬‡ï¸"
  local CLONE_SUCCESS="â¬‡ï¸âœ…"
  local CLONE_FAILURE="â¬‡ï¸âŒ"
  local PULL="ğŸ”„"
  local PULL_SUCCESS="ğŸ”„âœ…"
  local PULL_FAILURE="ğŸ”„âŒ"

  mkdir -p "${TARGET_DIR}"

  for REPO_URL in "${REPOS[@]}"; do
    local REPO_NAME
    REPO_NAME="$(basename "${REPO_URL}" .git)"
    local REPO_DIR="${TARGET_DIR}/${REPO_NAME}"

    if [[ -d "${REPO_DIR}" ]]; then
      echo "${PULL} Pulling latest changes for '${REPO_NAME}'..."
      pushd "${REPO_DIR}" > /dev/null || { echo "${PULL_FAILURE} Failed to enter '${REPO_DIR}'"; continue; }
      if command git pull; then
        echo "${PULL_SUCCESS} Pulled '${REPO_NAME}'"
      else
        echo "${PULL_FAILURE} Failed to pull '${REPO_NAME}'"
      fi
      popd > /dev/null || return
    else
      echo "${CLONE} Cloning '${REPO_NAME}'..."
      if command git clone "${REPO_URL}" "${REPO_DIR}"; then
        echo "${CLONE_SUCCESS} Cloned '${REPO_NAME}'"
      else
        echo "${CLONE_FAILURE} Failed to clone '${REPO_NAME}'"
      fi
    fi
  done
}

{{- end -}}
